@using SEIIApp.Shared.DomainDto
@inject Services.BackendAccessService BackendAccessService
@inject NavigationManager NavigationManager

@if (CourseDto != null)
{
    <label>These are all chapters of the course:</label>
    <ol>
        @foreach (var chapter in CourseDto.Chapters)
        {
            <li>
                @chapter.ChapterName
                <button class="btn btn-primary" @onclick="@(e => StartCourse(chapter))">Start Chapter</button>

            </li>
        }
    </ol>
}
else
{
    <p>loading...</p>
}

@code {

    [Parameter]
    public int CourseId { get; set; }

    [Parameter]
    public int UserId { get; set; }

    public CourseDto CourseDto { get; set; }

    protected override async Task OnParametersSetAsync()
    {
        await base.OnParametersSetAsync();
        CourseDto = await BackendAccessService.GetCourseById(CourseId);
    }

    private void StartCourse(ChapterDto chapterDto)
    {
        NavigationManager.NavigateTo($"/learningpage/{UserId}/{chapterDto.ChapterId}");
    }

}